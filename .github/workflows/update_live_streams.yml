name: Update YouTube Live Streams

on:
  schedule:
    - cron: '0 */2 * * *'  # 每兩小時執行一次
  workflow_dispatch:

jobs:
  update-live-streams:
    runs-on: ubuntu-latest

    steps:
      - name: 檢出倉庫
        uses: actions/checkout@v3

      - name: 安裝 Python 及依賴
        uses: actions/setup-python@v3
        with:
          python-version: '3.x'

      - name: 安裝 Selenium 及 WebDriver
        run: |
          pip install selenium beautifulsoup4 webdriver-manager

      - name: 執行 Python 爬取直播
        run: python youtube_live_scraper.py

- name: 提交並推送更新
  run: |
    git config --global user.name "GitHub Actions"
    git config --global user.email "actions@github.com"
    git pull --rebase  # 先拉取遠端最新變更，避免衝突
    git add youtube_live_streams.txt
    git commit -m "更新 YouTube 直播鏈接 [skip ci]" || echo "沒有變化需要提交"
    git push


